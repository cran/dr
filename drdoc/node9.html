<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 99.2beta8 (1.43)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Adding other methods to dr</TITLE>
<META NAME="description" CONTENT="Adding other methods to dr">
<META NAME="keywords" CONTENT="drdoc">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.2beta8">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="drdoc.css">

<LINK REL="previous" HREF="node8.html">
<LINK REL="up" HREF="node3.html">
<LINK REL="next" HREF="node10.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html118"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html116"
  HREF="node3.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html112"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/lib/latex2html/icons/prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html119"
  HREF="node10.html">Permutation tests</A>
<B> Up:</B> <A NAME="tex2html117"
  HREF="node3.html">Methods available</A>
<B> Previous:</B> <A NAME="tex2html113"
  HREF="node8.html">Multivariate phd</A>
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00036000000000000000"></A><A NAME="sec:newmeth"></A>
<BR>
Adding other methods to <TT>dr</TT>
</H2>
You may skip this section unless you are interested in adding
additional dimension reduction methods to <TT>dr</TT>. The
<TT>dr</TT> function is designed to be flexible and to make adding
additional methods to the package as easy as possible. Here are
the steps you need to follow:

<OL>
<LI>Select a name for your method.  For example suppose you
select the name ``poly'' to mean that you will be estimating <IMG
 WIDTH="23" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img39.png"
 ALT="$M$">
by fitting polynomials to the inverse plots each of the predictors
versus the response.  When you call <TT>dr</TT> with
<FONT SIZE="-1"><TT>method="poly"</TT></FONT>, an object of class <FONT SIZE="-1"><TT>poly</TT></FONT> will be
created.  If your response is a matrix, the object will be of type
<FONT SIZE="-1"><TT>mpoly</TT></FONT>, which inherits from <FONT SIZE="-1"><TT>poly</TT></FONT>.

<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="tab:fitM"></A><A NAME="320"></A>
<TABLE>
<CAPTION><STRONG>Table:</STRONG>
The <FONT SIZE="-1"><TT>dr.fit.M</TT></FONT> method for <I>sir</I>.</CAPTION>
<TR><TD><IMG
 WIDTH="556" HEIGHT="439" BORDER="0"
 SRC="img84.png"
 ALT="\begin{table}
\hrule
\small\begin{verbatim}
..."></TD></TR>
</TABLE>
</DIV><P></P>
<BR>
</LI>
<LI>You will need to write a function called <FONT SIZE="-1"><TT>dr.fit.M.poly</TT></FONT>
that estimates the <IMG
 WIDTH="23" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img39.png"
 ALT="$M$"> matrix for your method.  You can model this
function after the function <FONT SIZE="-1"><TT>dr.fit.M.sir</TT></FONT> shown in
Table&nbsp;<A HREF="node9.html#tab:fitM">1</A>.  The important arguments that are passed to
this function include <FONT SIZE="-1"><TT>z</TT></FONT>, which is an <IMG
 WIDTH="43" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img85.png"
 ALT="$n \times p$"> rotated
and centered data matrix with no missing values; <FONT SIZE="-1"><TT>y</TT></FONT>, which
is the response vector or matrix, and <FONT SIZE="-1"><TT>w</TT></FONT>, which is the
vector of weights, if any.  If your method requires other
parameters, for example setting a degree of a polynomial, simply
add the argument
<FONT SIZE="-1"><TT>degree=2</TT></FONT> to the list of function arguments.  This sets the
default value of <FONT SIZE="-1"><TT>degree</TT></FONT> equal to 2.  The ``...''
argument in the functions allow you to add the <FONT SIZE="-1"><TT>degree</TT></FONT>
argument when you call the function <TT>dr</TT>.  Your function must
return a list, including the argument <FONT SIZE="-1"><TT>M</TT></FONT>, which is the
matrix of interest. <IMG
 WIDTH="23" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img39.png"
 ALT="$M$"> can be either a square matrix leading to
an analysis of eigenvalues and eigenvectors, as in the example for
<I>sir</I>, or it can be a rectangular matrix, leading to use of
singular values and vectors.  All entries in the list will become
attributes of the resulting object.  For example, if your list is
<FONT SIZE="-1"><TT>list(z=z,degree=degree)</TT></FONT>, when you create an object like
<FONT SIZE="-1">
</FONT><PRE>
&gt; i1 &lt;- dr(LBM~Ht+Wt+RCC+WCC,method="poly",degree=3)
</PRE><FONT SIZE="-1">
</FONT>
the value of <FONT SIZE="-1"><TT>i1$degree</TT></FONT> will be 3.
</LI>
<LI>If your method works differently when <FONT SIZE="-1"><TT>y</TT></FONT> is a matrix,
write a method called <FONT SIZE="-1"><TT>dr.fit.M.mpoly</TT></FONT> to do the
computations for this case.  For <I>sir</I>, the only difference between
univariate and multivariate responses is in the way the slices are obtained,
and the method <FONT SIZE="-1"><TT>dr.slices</TT></FONT> works for either case.  As a result, a
separate multivariate fit method is not required for <I>sir</I>.
<BR><P></P>
<DIV ALIGN="CENTER"><A NAME="tab:testsir"></A><A NAME="321"></A>
<TABLE>
<CAPTION><STRONG>Table:</STRONG>
The <FONT SIZE="-1"><TT>dr.test.sir</TT></FONT> function.</CAPTION>
<TR><TD><IMG
 WIDTH="556" HEIGHT="316" BORDER="0"
 SRC="img86.png"
 ALT="\begin{table}
\hrule
\small\begin{verbatim}
dr.test.sir&lt;-function(object,...
...tat'',''df'',''p-value''))
z
}\end{verbatim}
\normalsize\hrule
\end{table}"></TD></TR>
</TABLE>
</DIV><P></P>
<BR>

</LI>
<LI>If your method has tests, other than the permutation tests
available for all methods, you will need to write a function
called <FONT SIZE="-1"><TT>dr.test.poly</TT></FONT> (or <FONT SIZE="-1"><TT>dr.test.mpoly</TT></FONT> if a
separate method is required for multivariate responses).  The
equivalent method for <I>sir</I> is shown in Table&nbsp;<A HREF="node9.html#tab:testsir">2</A>.
The test method is called by the <FONT SIZE="-1"><TT>summary.dr</TT></FONT> function.
</LI>
</OL>

The function <FONT SIZE="-1"><TT>dr.fit.y(object)</TT></FONT> returns the response
variable for use in computing <IMG
 WIDTH="23" HEIGHT="18" ALIGN="BOTTOM" BORDER="0"
 SRC="img39.png"
 ALT="$M$">.  For example, the function
<FONT SIZE="-1"><TT>dr.fit.y.phdy</TT></FONT> returns the left-hand side variable from the
formula specified in the call to <TT>dr</TT>, while
<FONT SIZE="-1"><TT>dr.fit.y.phdres</TT></FONT> returns
the residuals from the regression of the response on the predictors.
You may also want to write a
<FONT SIZE="-1"><TT>summary.dr.poly</TT></FONT> method if the default summary is not
adequate for your needs.

<HR>
<!--Navigation Panel-->
<A NAME="tex2html118"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="file:/usr/lib/latex2html/icons/next.png"></A> 
<A NAME="tex2html116"
  HREF="node3.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/lib/latex2html/icons/up.png"></A> 
<A NAME="tex2html112"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/lib/latex2html/icons/prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html119"
  HREF="node10.html">Permutation tests</A>
<B> Up:</B> <A NAME="tex2html117"
  HREF="node3.html">Methods available</A>
<B> Previous:</B> <A NAME="tex2html113"
  HREF="node8.html">Multivariate phd</A>
<!--End of Navigation Panel-->
<ADDRESS>
Sandy Weisberg
2002-01-10
</ADDRESS>
</BODY>
</HTML>
